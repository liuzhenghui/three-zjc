# 三维楼宇组件

---

在 e-builder 页面和表单中以三维模型方式展示大楼、楼层内部以及房间等。

## 1. 展示效果

|             单独页面显示大楼             |            表单中显示具体楼层             |             表格视图弹窗显示楼层             |
|:--------------------------------:|:--------------------------------:|:----------------------------------:|
| ![page.webp](assets%2Fpage.webp) | ![form.webp](assets%2Fform.webp) | ![table.webp](assets%2Ftable.webp) |

## 2. 导入组件

### 2.1. 相关文件

- 组件：[自定义组件-三维楼宇.zip(下载)](assets%2F%E8%87%AA%E5%AE%9A%E4%B9%89%E7%BB%84%E4%BB%B6-%E4%B8%89%E7%BB%B4%E6%A5%BC%E5%AE%87.zip)

- ebuilder示例应用：[EB应用-三维楼宇.zip(下载)](assets%2FEB%E5%BA%94%E7%94%A8-%E4%B8%89%E7%BB%B4%E6%A5%BC%E5%AE%87.zip)

### 2.2. 上传导入

> 页面设计器及表单设计器组件不同，需要分别导入

1. 页面设计器中导入: 进入页面设计器 > 切换至完整版① > 点击组件面板上方齿轮(组件管理)② > 创建`三维组件`分类③ >
   选中`自定义/三维组件`分类④ > 新建组件⑤ > 从本地导入⑥ > ⑧上传`自定义组件-三维楼宇.zip`
   ![iShot_2024-08-27_11.29.58.png](assets%2FiShot_2024-08-27_11.29.58.png)

2. 表单设计器中导入: ①进入表单设计器 > 点击组件面板上方齿轮(组件管理)① > 创建`三维组件`分类② > 选中`自定义/三维组件`
   分类③ >
   新建组件④ > 从本地导入⑤ > 上传`自定义组件-三维楼宇.zip`
   ![iShot_2024-08-27_11.35.27.png](assets%2FiShot_2024-08-27_11.35.27.png)

## 3. 组件配置

### 3.1. 单独页面中展示完整大楼

1. 导入组件(仅第1次)，参考`2.2`中 `页面设计器中导入`
2. 页面中拖入`基础组件/容器类/容器`，属性面板中启用 `样式/自定义样式` 和 `样式/大小/高度自动填充`
   ![iShot_2024-08-27_11.57.10.png](assets%2FiShot_2024-08-27_11.57.10.png)
3. 拖入 `自定义/三维组件/三维楼宇` 至第2点的容器内，属性面板中设置如下
   ![iShot_2024-08-27_11.52.34.png](assets%2FiShot_2024-08-27_11.52.34.png)

### 3.2. 表单中展示楼层

1. 导入组件(仅第1次)，参考`2.2`中 `表单设计器中导入`
2. 在表单最后拖入`基础组件/容器类/容器`，属性面板中启用 `样式/自定义样式`，样式信息选择`容器`，`大小/高度`按实际需要设置
   ![iShot_2024-08-27_12.24.05.png](assets%2FiShot_2024-08-27_12.24.05.png)
3. 拖入 `自定义/三维组件/三维楼宇` 至第2点的容器内，属性面板中设置如下
   ![iShot_2024-08-27_12.26.10.png](assets%2FiShot_2024-08-27_12.26.10.png)

### 3.3. 表格视图中弹窗

> E10 当前版本无表格视图可视化方式，暂时使用脚本配置

1. 导入组件(仅第1次)，参考`2.2`中 `表单设计器中导入`
2. `表单/按钮`中新建按钮，显示位置选择`表格视图/行上`，`按钮动作`添加`JavaScript`，脚本如下：

```javascript
  ThreeBuilding.openFloor({
    floorDataSetId: '1035922296447287303',   // 楼层数据集
    floorId: this.data.id,      // 楼层ID
    floorTitleField: 'mc',    // 楼层标题字段
    roomDataSetId: '1035923052193759232',    // 房间数据集
    roomNumField: 'bh',    // 房间编号字段
    roomTitleField: 'mc',    // 房间标题字段
    roomFloorField: 'lc',    // 房间中楼层字段
    roomCardFields: {mc: '名称', mj: '面积'},    // 房间浮窗显示字段
})
```

![iShot_2024-08-27_12.31.45.png](assets%2FiShot_2024-08-27_12.31.45.png)

![iShot_2024-08-27_12.32.46.png](assets%2FiShot_2024-08-27_12.32.46.png)